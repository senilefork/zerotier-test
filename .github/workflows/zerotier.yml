on: 
  workflow_dispatch:
  push:

jobs:
  zerotier:
    runs-on: ubuntu-latest
    steps:
    - name: Install ZeroTier Client
      run: |
        curl -s https://install.zerotier.com | sudo bash
    - name: Join ZeroTier Network
      run: |
        sudo zerotier-cli join ${{ secrets.ZEROTIER_NETWORKID }}
    - name: Authorize ZeroTier Client
      shell: bash
      run: |
        result=$(sudo zerotier-cli info)
        ClientId=$(echo $result | grep -oE '[A-Za-z0-9]{10}]')
        echo $ClientId
  




      
